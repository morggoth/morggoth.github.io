<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Scala"><meta property="og:title" content="Scala"><meta property="og:description" content="Scala Переменные val x // константа def x // вычисляются каждый раз, когда на них ссылаются lazy val x // вычисляется не больше одного раза в момент первого к ней обращения var x // &#34;настоящая&#34; переменная, которая может быть переопределена Области видимости { val x = &#34;Inner&#34; println(x) } println(x) // Error!!1! Пространства имен Идентификаторы:
 стабильные  package параметр функции val lazy val object   нестабильные:  def    Импортирование:"><meta property="og:type" content="article"><meta property="og:url" content="https://morggoth.github.io/docs/languages/scala/"><meta property="article:published_time" content="2020-02-12T16:45:56+03:00"><meta property="article:modified_time" content="2020-02-12T16:45:56+03:00"><title>Scala | Morggoth's wiki</title><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.daeb3603c687f9ac8113081371aff99b3a3a6406ce59d6f8e0a2d0e545b7bd24.css integrity="sha256-2us2A8aH+ayBEwgTca/5mzo6ZAbOWdb44KLQ5UW3vSQ="><script defer src=/en.search.min.65614e2b7f56a5c7902158a03586082fc970fbd28d3b16ab8ba49e0ffffed893.js integrity="sha256-ZWFOK39WpceQIVigNYYIL8lw+9KNOxari6SeD//+2JM="></script></head><body><input type=checkbox class=hidden id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=https://morggoth.github.io><span>Morggoth's wiki</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/docs/misc/old_hardware/>Old hardware</a></li><li><a href=/docs/languages/scala/ class=active>Scala</a></li><li><a href=/docs/languages/c_sharp/>C#</a></li><li><a href=/docs/misc/math/>Книга для чтения по высшей математике</a></li><li><a href=/docs/languages/c/>C</a></li><li><a href=/docs/misc/chromeos/>ChromeOS</a></li><li><a href=/docs/languages/java/>Java</a></li><li><a href=/docs/misc/macos/>macOS</a></li><li><a href=/docs/misc/mikrotik/>Mikrotik</a></li><li><a href=/docs/misc/tips_and_tricks/>Tips & Tricks</a></li><li><a href=/docs/mooc/>MOOC</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class="flex align-center justify-between book-header"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Scala</strong></header><article class=markdown><h1 id=scala>Scala</h1><h2 id=heading>Переменные</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=color:#66d9ef>val</span> x       <span style=color:#75715e>// константа
</span><span style=color:#75715e></span><span style=color:#66d9ef>def</span> x       <span style=color:#75715e>// вычисляются каждый раз, когда на них ссылаются
</span><span style=color:#75715e></span><span style=color:#66d9ef>lazy</span> <span style=color:#66d9ef>val</span> x  <span style=color:#75715e>// вычисляется не больше одного раза в момент первого к ней обращения
</span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> x       <span style=color:#75715e>// &#34;настоящая&#34; переменная, которая может быть переопределена
</span></code></pre></div><h2 id=->Области видимости</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=color:#f92672>{</span>
    <span style=color:#66d9ef>val</span> x <span style=color:#66d9ef>=</span> <span style=color:#e6db74>&#34;Inner&#34;</span>
    println<span style=color:#f92672>(</span>x<span style=color:#f92672>)</span>
<span style=color:#f92672>}</span>
println<span style=color:#f92672>(</span>x<span style=color:#f92672>)</span>   <span style=color:#75715e>// Error!!1!
</span></code></pre></div><h2 id=-1>Пространства имен</h2><p>Идентификаторы:</p><ul><li>стабильные<ul><li>package</li><li>параметр функции</li><li>val</li><li>lazy val</li><li>object</li></ul></li><li>нестабильные:<ul><li>def</li></ul></li></ul><p>Импортирование:</p><ul><li>нескольких сущностей из пакета:</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=color:#66d9ef>import</span> com.example.Module.<span style=color:#f92672>{</span>name1<span style=color:#f92672>,</span> name2<span style=color:#f92672>}</span>
</code></pre></div><ul><li>все имена из пространства:</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=color:#66d9ef>import</span> com.example.Module._
</code></pre></div><ul><li>переименование при импорте:</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=color:#66d9ef>import</span> com.example.Module.<span style=color:#f92672>{</span>name1 <span style=color:#66d9ef>=&gt;</span> newName<span style=color:#f92672>}</span>
</code></pre></div><ul><li>импортирование всех имен, кроме указанных:</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=color:#66d9ef>import</span> com.example.Module.<span style=color:#f92672>{</span><span style=color:#66d9ef>_</span><span style=color:#f92672>,</span> name1 <span style=color:#66d9ef>=&gt;</span> <span style=color:#66d9ef>_</span><span style=color:#f92672>}</span>
</code></pre></div><h2 id=heading1>Типы</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala>A <span style=color:#66d9ef>&lt;:</span> B      <span style=color:#75715e>// Тип А является подтипом типа В, когда все значения А могут использоваться как значения типа В.
</span><span style=color:#75715e></span>
A <span style=color:#66d9ef>&lt;:</span> <span style=color:#a6e22e>Any</span>    <span style=color:#75715e>// Надтип для любого другого типа
</span><span style=color:#75715e></span>
A <span style=color:#66d9ef>&lt;:</span> <span style=color:#a6e22e>AnyRef</span> <span style=color:#75715e>// Надтип для любых ссылочных типов
</span><span style=color:#75715e></span>A <span style=color:#66d9ef>&lt;:</span> <span style=color:#a6e22e>AnyVal</span> <span style=color:#75715e>// Надтип для любых примитивных типов
</span><span style=color:#75715e></span>
<span style=color:#66d9ef>val</span> x<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>String</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Some string&#34;</span>
<span style=color:#66d9ef>val</span> y<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>AnyRef</span> <span style=color:#f92672>=</span> x
<span style=color:#66d9ef>val</span> z<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>Any</span> <span style=color:#f92672>=</span> y

<span style=color:#66d9ef>val</span> a<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>Int</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>
<span style=color:#66d9ef>val</span> b<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>AnyVal</span> <span style=color:#f92672>=</span> a
<span style=color:#66d9ef>val</span> c<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>Any</span> <span style=color:#f92672>=</span> b

<span style=color:#a6e22e>Nothing</span> <span style=color:#66d9ef>&lt;:</span>  <span style=color:#75715e>// является подтипом любого типа, в основном используется при генерации ошибок
</span></code></pre></div><p>Примитивные типы:</p><ul><li>Целые числа (знаковые)<ul><li>Byte (1 byte)</li><li>Short (2 byte)</li><li>Int (4 byte)</li><li>Long (8 byte)</li></ul></li><li>Дробные числа:<ul><li>Float (4 byte)</li><li>Double (8 byte)</li></ul></li><li>Символы<ul><li>Char (2 byte)</li></ul></li><li>Булевые значения:<ul><li>Boolean</li></ul></li><li>Единичный тип:<ul><li>Unit (значение этого типа константно, используется, например, для типа значения, возвращаемого из функции, если оно нас не интересует)</li></ul></li></ul><h2 id=heading2>Числа</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=color:#66d9ef>val</span> a <span style=color:#66d9ef>=</span> <span style=color:#ae81ff>3</span>       <span style=color:#75715e>// Int
</span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> b <span style=color:#66d9ef>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>5L</span>     <span style=color:#75715e>// Long
</span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> c <span style=color:#66d9ef>=</span> <span style=color:#ae81ff>10.0</span>    <span style=color:#75715e>// Double
</span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> d<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>Float</span>    <span style=color:#75715e>// Явно указанный Float
</span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> e <span style=color:#66d9ef>=</span> <span style=color:#ae81ff>1.03e1</span>  <span style=color:#75715e>// Вариант записи с мантиссой (научная форма записи)
</span></code></pre></div><p>Алгебраические операции с числами:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=color:#66d9ef>val</span> x <span style=color:#66d9ef>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>5</span>
<span style=color:#66d9ef>val</span> y <span style=color:#66d9ef>=</span> <span style=color:#ae81ff>3</span>

x <span style=color:#f92672>+</span> y   <span style=color:#75715e>// Сложение
</span><span style=color:#75715e></span>x <span style=color:#f92672>-</span> y   <span style=color:#75715e>// Вычитание
</span><span style=color:#75715e></span>x <span style=color:#f92672>*</span> y   <span style=color:#75715e>// Умножение
</span><span style=color:#75715e></span>x <span style=color:#f92672>/</span> y   <span style=color:#75715e>// Целочисленное деление
</span><span style=color:#75715e></span>x <span style=color:#f92672>%</span> y   <span style=color:#75715e>// Взятие остатка
</span><span style=color:#75715e></span><span style=color:#f92672>-</span>x      <span style=color:#75715e>// Унарный минус
</span></code></pre></div><p>Побитовые операции с числами:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=color:#66d9ef>val</span> x <span style=color:#66d9ef>=</span> <span style=color:#ae81ff>0xF</span>
<span style=color:#66d9ef>val</span> y <span style=color:#66d9ef>=</span> <span style=color:#ae81ff>0</span><span style=color:#a6e22e>XA1</span>

x <span style=color:#f92672>&gt;&gt;</span> y  <span style=color:#75715e>// побитовый сдвиг вправо
</span><span style=color:#75715e></span>x <span style=color:#f92672>&lt;&lt;</span> y  <span style=color:#75715e>// -//- влево
</span><span style=color:#75715e></span>x <span style=color:#f92672>|</span> y   <span style=color:#75715e>// -//- ИЛИ
</span><span style=color:#75715e></span>x <span style=color:#f92672>&amp;</span> y   <span style=color:#75715e>// -//- И
</span><span style=color:#75715e></span>x <span style=color:#f92672>^</span> y   <span style=color:#75715e>// -//- исключающее ИЛИ
</span><span style=color:#75715e></span><span style=color:#f92672>~</span>x      <span style=color:#75715e>// -//- инверсия
</span></code></pre></div><h3 id=-------->Порядок операций (по возрастанию, определяется по первому символу оператора)</h3><ol><li>символы</li><li>|</li><li>^</li><li>&</li><li>= !</li><li>&lt;></li><li>:</li><li>+ -</li><li>* / %</li><li>все остальные знаки</li></ol><h3 id=---->Ссылочные типы для больших чисел</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=color:#66d9ef>val</span> x <span style=color:#66d9ef>=</span> <span style=color:#a6e22e>BigInt</span><span style=color:#f92672>(</span><span style=color:#ae81ff>10</span><span style=color:#f92672>)</span>      <span style=color:#75715e>// Целочисленный тип, содержащий неограниченное количество цифр
</span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> y <span style=color:#66d9ef>=</span> <span style=color:#a6e22e>BigDecimal</span><span style=color:#f92672>(</span><span style=color:#ae81ff>10</span><span style=color:#f92672>)</span>  <span style=color:#75715e>// Дробное число, так же не ограниченное по длине
</span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> z <span style=color:#66d9ef>=</span> <span style=color:#a6e22e>BigInt</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;1000&#34;</span><span style=color:#f92672>)</span>  <span style=color:#75715e>// Эти типы могу быть инициализированы как числом, так и строчным представлением числа
</span><span style=color:#75715e></span>
x pow <span style=color:#ae81ff>100</span>               <span style=color:#75715e>// Операция возведения в степень для BigInt, не дающая переполнения
</span><span style=color:#75715e></span>x gcd y                 <span style=color:#75715e>// Нахождение наибольшего общего делителя для двух больших чисел
</span></code></pre></div><h2 id=-2>Булевые значения</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=color:#66d9ef>val</span> a <span style=color:#66d9ef>=</span> <span style=color:#66d9ef>true</span>
<span style=color:#66d9ef>val</span> b <span style=color:#66d9ef>=</span> <span style=color:#66d9ef>false</span>
</code></pre></div><p>Операции сравнения:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=color:#66d9ef>val</span> a <span style=color:#66d9ef>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>5</span>   <span style=color:#75715e>// Больше
</span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> b <span style=color:#66d9ef>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>5</span>   <span style=color:#75715e>// Меньше
</span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> c <span style=color:#66d9ef>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>5</span>  <span style=color:#75715e>// Меньше или равно
</span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> d <span style=color:#66d9ef>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>5</span>  <span style=color:#75715e>// Больше или равно
</span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> e <span style=color:#66d9ef>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>5</span>  <span style=color:#75715e>// Равно
</span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> f <span style=color:#66d9ef>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>!=</span> <span style=color:#ae81ff>5</span>  <span style=color:#75715e>// Не равно
</span></code></pre></div><p>Логические операции:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=color:#66d9ef>val</span> x <span style=color:#66d9ef>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>5</span>
<span style=color:#66d9ef>val</span> y <span style=color:#66d9ef>=</span> <span style=color:#e6db74>&#34;Example&#34;</span> contains <span style=color:#e6db74>&#34;a&#34;</span>

x <span style=color:#f92672>&amp;&amp;</span> y  <span style=color:#75715e>// И
</span><span style=color:#75715e></span>x <span style=color:#f92672>||</span> y  <span style=color:#75715e>// ИЛИ
</span><span style=color:#75715e></span><span style=color:#f92672>!</span>x      <span style=color:#75715e>// НЕ
</span></code></pre></div><p>Равенство:</p><p>Сравнивать объекты разных типов можно, но компилятор выдаст предупреждение.</p><p>Сравнение по ссылке:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=color:#66d9ef>val</span> x <span style=color:#66d9ef>=</span> <span style=color:#e6db74>&#34;Te&#34;</span>
<span style=color:#66d9ef>val</span> y <span style=color:#66d9ef>=</span> <span style=color:#e6db74>&#34;st&#34;</span>
<span style=color:#66d9ef>val</span> a <span style=color:#66d9ef>=</span> x <span style=color:#f92672>+</span> y
<span style=color:#66d9ef>val</span> b <span style=color:#66d9ef>=</span> x <span style=color:#f92672>+</span> y

a <span style=color:#f92672>==</span> b  <span style=color:#75715e>// true, так как значения одинаковые
</span><span style=color:#75715e></span>a eq b  <span style=color:#75715e>// false, так как ссылки разные
</span></code></pre></div><p>В Java все константные строки интернированы: компилятор производит оптимизацию, в результате чего, одинаковые строковые литералы ссылаются на один и тот же объект в памяти. Поэтому:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=color:#66d9ef>val</span> s1 <span style=color:#66d9ef>=</span> <span style=color:#e6db74>&#34;foo&#34;</span>
<span style=color:#66d9ef>val</span> s2 <span style=color:#66d9ef>=</span> <span style=color:#e6db74>&#34;foo&#34;</span>
println<span style=color:#f92672>(</span>s1 eq s2<span style=color:#f92672>)</span> <span style=color:#75715e>// true
</span></code></pre></div></article><div class="book-footer justify-between"></div></div><aside class="book-toc levels-6 fixed"><nav id=TableOfContents><ul><li><a href=#heading>Переменные</a></li><li><a href=#->Области видимости</a></li><li><a href=#-1>Пространства имен</a></li><li><a href=#heading1>Типы</a></li><li><a href=#heading2>Числа</a><ul><li><a href=#-------->Порядок операций (по возрастанию, определяется по первому символу оператора)</a></li><li><a href=#---->Ссылочные типы для больших чисел</a></li></ul></li><li><a href=#-2>Булевые значения</a></li></ul></nav></aside></main></body></html>